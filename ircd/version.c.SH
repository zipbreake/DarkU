echo "Extracting ircd/version.c ..."

if test -r version.c
then
   generation=`sed -n 's/^char \*generation = \"\(.*\)\";/\1/p' < version.c`
   if test ! "$generation" ; then generation=0; fi
else
   generation=0
fi

generation=`expr $generation + 1`

sum=sum
if $sum s_serv.c 1> /dev/null 2>&1; then
:
else
  sum=cksum
fi
sumsserv=`$sum s_serv.c 2> /dev/null`;
sumsuser=`$sum s_user.c 2> /dev/null`;
sumchan=`$sum channel.c 2> /dev/null`;
sumsbsd=`$sum s_bsd.c 2> /dev/null`;
sumhash=`$sum hash.c 2> /dev/null`;
sumsmisc=`$sum s_misc.c 2> /dev/null`;
sumircd=`$sum ircd.c 2> /dev/null`;

creation=`date | \
awk '{if (NF == 6) \
	 { print $1 " "	 $2 " " $3 " "	$6 " at " $4 " " $5 } \
else \
	 { print $1 " "	 $2 " " $3 " " $7 " at " $4 " " $5 " " $6 }}'`

cvsversion=`cat ../.patches`

/bin/cat >version.c <<!SUB!THIS!
/*
 * IRC - Internet Relay Chat, ircd/version.c
 * Copyright (C) 1990 Chelsea Ashley Dyerman
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 1, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

/*
 * This file is generated by version.c.SH. Any changes made will go away.
 */

#include "version.h"
#include "patchlevel.h"

const char *generation = "$generation";
const char *creation = "$creation";
const char *version = BASE_VERSION "$cvsversion";

const char *infotext[] = {
    "IRC --",
    "Este programa es software libre; ver la LICENCIA en la distribución",
    "",
    "Basado en el código original escrito por Jarkko Oikarinen, versión 2.6:",
    "Wiz	  Jarkko Oikarinen	   <jto@tolsun.oulu.fi>",
    "",
    "El desarrollador principal de la versión u2.9 y u2.10 fue:",
    "Run	  Carlo Wood		   <carlo@runaway.xs4all.nl>",
    "",
    "Tras este el desarrollador principal de la versión u2.10 fue:",
    "Bleep        Thomas Helvey            <tomh@inxpress.net>",
    "",
    "En la última release de Undernet colaboraron:",
    "Kev, Isomer, Gte, Ghostwolf, Bleep",
    "Soporte y depuración:",
    "SeKs, Maniac-, HeKTik, OmniDynmc, Liandrin, Dianora",
    "",
    "Gracias también a la gente que contribuyó con cualquier versión.",
    "En doc/Authors se puede ver una lista de todos los programadores",
    "de este código.",
    "",
    "Desarrollador principal hasta la versión u2.10.RH.2.108:",
    "RyDeN       Alberto Alonso       ryden@redhispana.org",
    "",
    "Otros desarrolladores para u2.10.RH.2.108:",
    "mount       Jorge Duarte         mount@redhispana.org",
    "",
    "Este IRCd tiene partes de la Base de Datos Distribuida",
    "del ircuH y el algoritmo de cifrado RC4 del Bahamut.",
    "",
    "En memoria de Raquel Alonso Pinto",
    " ",
    "Desarrollador principal de DarkU:",
    "ZipBreake    Javier Fdez. Viña    <javier@jfv.es>",
    " ",
    "Otros desarrolladores para DarkU:",
    "Er_Maqui     David López Zájara   <er_maqui@darkbolt.net>",
    "Carlos       Carlos Santos        <carlossc@gmail.com>",
    " ",
    "DarkU es un producto mantenido por COMUSYS para sus portales",
    "y clientes. Si quieres más información sobre nuestros productos",
    "y servicios visita http://www.comusys.com/",
    " ",
    "También puedes encontrar más información detallada sobre el",
    "funcionamiento de este servidor en http://jfv.es/ ",
    " ",
    "[$sumsserv] [$sumchan] [$sumsbsd] [$sumsuser]",
    "[$sumhash] [$sumsmisc] [$sumircd]",
    0,
};
!SUB!THIS!
